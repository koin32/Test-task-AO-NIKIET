# IPC через Shared Memory с многопоточной компрессией

Проект для передачи больших бинарных файлов (до 50 МБ) между процессами через POSIX Shared Memory (256 байт) с использованием многопоточной компрессии zlib.

------------------
```bash
# Сборка проекта
./build.sh

# Запуск producer (отправка данных)
./producer.sh

# Запуск consumer (прием данных) - в отдельном терминале
./consumer.sh
```
------------------
## Как пименять без bash скритов?

В 2 терминалах запускае программу

| consumer (приём) | producer (передача) |
| --- | --- |
| consumer <путь и название будущего файла> | producer <путь и название отпраавляемого файла> |
---
## Принцип работы
### 1. Подготовка данных (Producer)

#### Фаза 1: Чтение и разделение на блоки
- **Вход**: Исходный бинарный файл (до 50 МБ)
- **Процесс**:
  - Файл читается целиком в память
  - Данные разделяются на блоки фиксированного размера (64 КБ)
  - Для пустого файла создается специальный маркер

#### Фаза 2: Многопоточное сжатие
- **Параллелизм**: Каждый блок сжимается в отдельном потоке
- **Алгоритм**: Zlib с уровнем сжатия `Z_BEST_SPEED`
- **Результат**: Вектор сжатых блоков готовых к передаче

### 2. Протокол передачи через Shared Memory

#### Структура shared memory (256 байт):
```c
struct SharedMemoryHeader {
    uint32_t synchronization_flag;    // Spinlock (4 байта)
    uint32_t message_available;       // Флаг готовности (4 байта)  
    uint32_t data_block_identifier;   // ID блока (4 байта)
    uint32_t fragment_sequence_number;// № фрагмента (4 байта)
    uint8_t  is_final_fragment;       // Флаг последнего чанка (1 байт)
    uint32_t actual_payload_length;   // Длина данных (4 байта)
    uint8_t  data_payload[200];       // Полезная нагрузка (200 байт)
};
```